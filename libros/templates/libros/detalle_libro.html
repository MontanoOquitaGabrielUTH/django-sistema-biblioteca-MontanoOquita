{% extends 'base.html' %}
{% load static %}

{% block title %}{{ libro.titulo }} - Biblioteca UTH{% endblock %}

{% block content %}
<style>
    .breadcrumb {
        padding: 20px 0;
        color: #999;
        font-size: 0.95em;
    }
    .breadcrumb a {
        color: #667eea;
        text-decoration: none;
        transition: color 0.3s ease;
    }
    .breadcrumb a:hover {
        color: #764ba2;
    }
    .libro-detalle-layout {
        display: grid;
        grid-template-columns: 400px 1fr;
        gap: 40px;
        margin: 30px 0;
        background: white;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 2px 20px rgba(0,0,0,0.08);
    }
    .libro-imagen-grande {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 12px;
        height: 500px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: sticky;
        top: 20px;
    }
    .libro-placeholder-grande {
        font-size: 8em;
        opacity: 0.8;
    }
    .libro-detalle-info h1 {
        color: #333;
        font-size: 2.2em;
        margin-bottom: 15px;
        line-height: 1.3;
    }
    .libro-autor-grande {
        color: #667eea;
        font-size: 1.3em;
        font-weight: 600;
        margin-bottom: 30px;
    }
    .libro-meta-info {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 30px;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }
    .meta-item {
        padding: 10px 0;
    }
    .meta-item strong {
        color: #333;
        display: block;
        margin-bottom: 5px;
        font-size: 0.9em;
    }
    .text-success {
        color: #4caf50;
        font-weight: 600;
    }
    .text-danger {
        color: #f44336;
        font-weight: 600;
    }
    .libro-descripcion {
        margin: 30px 0;
        line-height: 1.8;
    }
    .libro-descripcion h3 {
        color: #333;
        margin-bottom: 15px;
        font-size: 1.4em;
    }
    .libro-descripcion p {
        color: #666;
        font-size: 1.05em;
    }
    .libro-acciones {
        margin-top: 30px;
        padding-top: 30px;
        border-top: 2px solid #e0e0e0;
    }
    .btn-lg {
        padding: 15px 35px;
        font-size: 1.1em;
    }
    .autor-info-section {
        background: white;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 2px 20px rgba(0,0,0,0.08);
        margin-top: 30px;
    }
    .autor-info-section h2 {
        color: #333;
        margin-bottom: 20px;
        font-size: 1.8em;
    }
    .autor-card {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 12px;
        border-left: 4px solid #667eea;
    }
    .autor-card h3 {
        color: #667eea;
        margin-bottom: 15px;
        font-size: 1.4em;
    }
    .autor-card p {
        color: #666;
        line-height: 1.8;
        margin: 10px 0;
    }
    @media (max-width: 768px) {
        .libro-detalle-layout {
            grid-template-columns: 1fr;
        }
        .libro-imagen-grande {
            height: 300px;
            position: static;
        }
        .libro-meta-info {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="container">
    <div class="breadcrumb">
        <a href="{% url 'home' %}">Inicio</a> /
        <a href="{% url 'catalogo' %}">Cat치logo</a> /
        <span>{{ libro.titulo }}</span>
    </div>
    
    <div class="libro-detalle-layout">
        <div class="libro-imagen-grande">
            <div class="libro-placeholder-grande">游닀</div>
        </div>
        
        <div class="libro-detalle-info">
            <h1>{{ libro.titulo }}</h1>
            <p class="libro-autor-grande">Por {{ libro.autor.nombre_completo }}</p>
            
            <div class="libro-meta-info">
                <div class="meta-item">
                    <strong>ISBN:</strong> {{ libro.isbn }}
                </div>
                <div class="meta-item">
                    <strong>Editorial:</strong> {{ libro.editorial.nombre }}
                </div>
                <div class="meta-item">
                    <strong>Categor칤a:</strong> {{ libro.categoria.nombre }}
                </div>
                <div class="meta-item">
                    <strong>A침o:</strong> {{ libro.fecha_publicacion|date:"Y" }}
                </div>
                <div class="meta-item">
                    <strong>P치ginas:</strong> {{ libro.numero_paginas }}
                </div>
                <div class="meta-item">
                    <strong>Stock Total:</strong> {{ libro.stock_total }}
                </div>
                <div class="meta-item">
                    <strong>Disponibles:</strong> 
                    {% if libro.stock_disponible > 0 %}
                        <span class="text-success">{{ libro.stock_disponible }}</span>
                    {% else %}
                        <span class="text-danger">No disponible</span>
                    {% endif %}
                </div>
            </div>
            
            {% if libro.descripcion %}
            <div class="libro-descripcion">
                <h3>Descripci칩n</h3>
                <p>{{ libro.descripcion }}</p>
            </div>
            {% endif %}
            
            {% if libro.stock_disponible > 0 %}
            <div class="libro-acciones">
                {% if user.is_authenticated %}
                    <a href="{% url 'solicitar_prestamo' libro.id %}" class="btn btn-primary btn-lg">
                        游늶 Solicitar Pr칠stamo
                    </a>
                {% else %}
                    <a href="{% url 'login' %}?next={{ request.path }}" class="btn btn-primary btn-lg">
                        Iniciar sesi칩n para pedir prestado
                    </a>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </div>
    
    <div class="autor-info-section">
        <h2>Sobre el Autor</h2>
        <div class="autor-card">
            <h3>{{ libro.autor.nombre_completo }}</h3>
            {% if libro.autor.nacionalidad %}
            <p><strong>Nacionalidad:</strong> {{ libro.autor.nacionalidad }}</p>
            {% endif %}
            {% if libro.autor.biografia %}
            <p>{{ libro.autor.biografia }}</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}